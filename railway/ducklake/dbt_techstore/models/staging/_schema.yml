version: 2

models:
  - name: stg_canal
    description: "Dimension: canales de venta (VTEX, MercadoLibre, Garbarino)"
    columns:
      - name: canal_id
      - name: canal

  - name: stg_cliente
    description: "Dimension: clientes unicos por canal extraidos de buyer/clientProfileData/customer"
    columns:
      - name: cliente_id
      - name: canal
      - name: cliente_id_origen

  - name: stg_ubicacion_geo
    description: "Dimension: ubicaciones geograficas unicas de entrega"
    columns:
      - name: ubicacion_id

  - name: stg_producto
    description: "Dimension: productos unicos por canal extraidos de arrays de items en pedidos"
    columns:
      - name: producto_id
      - name: canal
      - name: nombre

  - name: stg_pedido
    description: "Fact: pedidos unificados de las 3 plataformas con surrogate key"
    columns:
      - name: pedido_id
      - name: orden_id_origen
      - name: canal_id
      - name: status
      - name: monto_total
      - name: fecha_creacion

  - name: stg_item_pedido
    description: "Fact: lineas de pedido, un registro por producto dentro de cada pedido"
    columns:
      - name: item_pedido_id
      - name: pedido_id
      - name: producto_id_origen
      - name: cantidad
      - name: precio_unitario
      - name: subtotal

  - name: stg_cliente_pedido
    description: "Bridge: relacion entre clientes y sus pedidos por canal"
    columns:
      - name: cliente_id
      - name: pedido_id
      - name: fecha_pedido
      - name: monto_total

  - name: stg_cliente_canal
    description: "Bridge: canales que usa cada cliente con metricas de actividad"
    columns:
      - name: cliente_id
      - name: canal_id
      - name: total_pedidos

  - name: stg_cliente_ubicacion_geo
    description: "Bridge: clientes y ubicaciones geograficas de sus entregas"
    columns:
      - name: cliente_id
      - name: ubicacion_id

  - name: stg_canal_producto
    description: "Bridge: productos vendidos por canal con metricas de revenue y unidades"
    columns:
      - name: canal_id
      - name: producto_id
      - name: total_pedidos
      - name: revenue_total
